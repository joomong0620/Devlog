<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.devlog.project.manager.model.mapper.ManagerReportMapper">

    <!-- 게시글 번호로 board_code 조회 -->
    <select id="selectBoardCode" resultType="int">
        SELECT board_code
        FROM board
        WHERE board_no = #{boardNo}
    </select>

    <!-- 댓글 번호로 board_no 조회 -->
    <select id="selectBoardNoByComment" resultType="long">
        SELECT board_no
        FROM comment
        WHERE comment_no = #{commentNo}
    </select>
    
    <!-- 게시글 삭제 -->
	<update id="deleteBoard">
	    UPDATE board
	    SET board_del_fl = 'Y'
	    WHERE board_no = #{boardNo}
	</update>
	
	<!-- 게시글 삭제 여부 조회 -->
	<select id="isBoardDeleted" resultType="int">
	  SELECT
	    CASE
	      WHEN BOARD_DEL_FL = 'Y' THEN 1
	      ELSE 0
	    END
	  FROM BOARD
	  WHERE BOARD_NO = #{boardNo}
	</select>
</mapper>
