<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>DEVLOG - 글 작성</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://uicdn.toast.com/editor/latest/toastui-editor.min.css" />

    <link rel="stylesheet" th:href="@{/css/common/common.css}">
    <link rel="stylesheet" th:href="@{/css/common/notification.css}" />
    <link rel="stylesheet" th:href="@{/css/board/blog/blogWrite.css}">
</head>

<body>

    <div th:replace="~{common/header :: header}"></div>

    <main class="write-container">

        <input type="hidden" id="boardNo" th:value="${post != null ? post.boardNo : ''}">
        <input type="hidden" id="initialContent" th:value="${post != null ? post.boardContent : ''}">
        <input type="hidden" id="initialTags" th:value="${post != null ? #strings.listJoin(post.tagList, ',') : ''}">

        <section class="title-section">
            <input type="text" class="input-title" id="titleInput" placeholder="제목을 입력하세요."
                th:value="${post != null ? post.boardTitle : ''}">

            <div class="divider"></div>

            <div class="tag-wrapper">
                <div id="tagList" class="tag-list"></div>
                <input type="text" class="input-tag" id="tagInput" placeholder="# 태그 입력 (쉼표로 등록)">
            </div>
        </section>

        <div class="spell-check-area">
            <span>스마트 맞춤법 검사</span>
            <label class="toggle-switch">
                <input type="checkbox" id="spellToggle">
                <span class="slider round"></span>
            </label>
        </div>

        <div id="editor"></div>

        <section class="bottom-section">

            <div class="paid-content-settings">
                <div class="setting-title">
                    <i class="fa-solid fa-crown crown-icon"></i> 유료 콘텐츠 발행
                </div>
                <p class="setting-desc">
                    유료 콘텐츠는 구매자에게 직접적인 가치를 전달하는 중요한 제품입니다.<br>
                    자세한 내용을 확인하신 후 발행을 진행해 주세요.
                    <a href="#" id="btnOpenModal">자세히 알아보기</a>
                </p>

                <div class="radio-group">
                    <label class="radio-label">
                        <input type="radio" name="content-type" value="free"
                            th:checked="${post == null or post.isPaid == 'N'}">
                        <span class="radio-custom"></span>
                        일반 콘텐츠로 발행합니다
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="content-type" value="paid"
                            th:checked="${post != null and post.isPaid == 'Y'}">
                        <span class="radio-custom"></span>
                        유료 콘텐츠로 발행합니다
                    </label>
                </div>

                <div class="price-input-wrapper" id="priceWrapper">
                    <span class="price-label">판매 금액</span>
                    <div class="input-with-icon">
                        <i class="fa-solid fa-coins bean-icon"></i>
                        <input type="number" id="priceInput" placeholder="0" min="0"
                            th:value="${post != null ? post.price : ''}"
                            th:disabled="${post == null or post.isPaid == 'N'}">
                        <span class="unit">콩</span>
                    </div>
                </div>
            </div>

            <div class="action-buttons">
                <button class="btn-exit" onclick="history.back()">← 나가기</button>
                <div class="right-buttons">
                    <button class="btn-draft">임시저장</button>
                    <button class="btn-publish" id="btnSave" th:text="${post != null ? '수정하기' : '발행하기'}">발행하기</button>
                </div>
            </div>
        </section>
    </main>

    <div id="guidelineModal" class="modal-overlay">
        <div class="modal-window">
            <div class="modal-header">
                <h3>📘 유료 콘텐츠 발행 작가 안내사항 (가이드라인)</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="guideline-item">
                    <h4>1. 콘텐츠 품질 및 검수 관련 안내</h4>
                    <p>유료 콘텐츠는 무료 게시물보다 기대치가 높습니다. 독자에게 명확한 가치를 제공할 수 있도록 아래 사항을 준비해주세요.</p>
                    <ul>
                        <li>내용의 정확성, 저작권 준수 여부를 반드시 확인해주세요.</li>
                        <li>오탈자, 문장 구조, 레이아웃 체크 등 기본 검수는 작가님 책임입니다.</li>
                        <li>인용·참고자료가 있다면 출처를 명확히 명시해주세요.</li>
                        <li>사실 기반 콘텐츠일 경우 데이터·근거를 제시하면 신뢰도가 높아집니다.</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <div class="footer-message">
                    <i class="fa-solid fa-crown crown-icon"></i> “유료 콘텐츠는 작가님의 브랜드입니다”
                </div>
                <p>유료 발행은 단순한 판매 기능이 아니라<br><strong>작가님의 전문성·경험·가치를 증명하는 브랜드 구축 과정</strong>입니다.</p>
                <p class="sub-text">서비스는 작가님이 안정적으로 창작 활동을 할 수 있도록 최선을 다해 지원하겠습니다.</p>
            </div>
        </div>
    </div>

    <div th:replace="~{common/footer :: footer}"></div>

    <script src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>

    <script th:src="@{/js/common/header.js}"></script>
    <script th:src="@{/js/notification/noti.js}"></script>

    <script th:src="@{/js/board/blog/blogWrite.js}"></script>
</body>

</html>