<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title th:text="${userProfile.nickname + ' - DevLog'}">DevLog - My Blog</title>
    
    <link rel="stylesheet" as="style" crossorigin
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" th:href="@{/css/common/common.css}">
    <link rel="stylesheet" th:href="@{/css/common/notification.css}" />
    
    <link rel="stylesheet" th:href="@{/css/board/blog/myDev.css}">
</head>

<body>

    <div th:replace="~{common/header :: header}"></div>

    <div class="container">
        <header class="blog-header">
            <div class="header-left">
                <div class="profile-main-img">
                    <img th:src="${userProfile.profileImgUrl != null ? userProfile.profileImgUrl : 'https://placehold.co/180x180/333/fff?text=Profile'}"
                        alt="Profile">
                </div>
                <div class="profile-content">
                    <div class="nickname-area">
                        <h1 th:text="${userProfile.nickname}">Nickname</h1>

                        <div class="dropdown-owner" th:if="${isOwner}">
                            <i class="fa-solid fa-ellipsis-vertical" id="menuBtn"></i>
                            <div class="dropdown-box" id="dropdownMenu">
                                <a href="#"><i class="fa-solid fa-clock-rotate-left"></i> ÎÇ¥ ÌôúÎèô</a>
                                <a href="#"><i class="fa-solid fa-user-gear"></i> ÌîÑÎ°úÌïÑ ÏÑ§Ï†ï</a>
                                <hr>
                                <a href="/logout">Î°úÍ∑∏ÏïÑÏõÉ</a>
                            </div>
                        </div>
                    </div>
                    <div class="lv-row">
                        <span class="user-name" th:text="${userProfile.username}">Ïã§Î™Ö</span>
                        <div class="exp-container" th:if="${isOwner}">
                            <div class="exp-fill" style="width: 70%;"></div> <span class="lv-text">Lv.12</span>
                        </div>
                    </div>
                    <p class="job-tag" th:text="${userProfile.job} ?: 'Í∞úÎ∞úÏûê'">ÏßÅÏóÖ ÌÉúÍ∑∏</p>
                    <div class="social-links">
                        <i class="fa-brands fa-github" th:onclick="|window.open('${userProfile.githubUrl}')|"
                            th:if="${userProfile.githubUrl}"></i>
                        <i class="fa-solid fa-house" th:onclick="|window.open('${userProfile.blogUrl}')|"
                            th:if="${userProfile.blogUrl}"></i>
                    </div>
                    <p class="bio" th:utext="${userProfile.bio} ?: 'ÏÜåÍ∞úÍ∞Ä ÏóÜÏäµÎãàÎã§.'">Bio</p>
                </div>
            </div>

            <div class="header-center">
                <div class="top-stat-row">
                    <div class="stat-btn">ÌåîÎ°úÏõå <strong th:text="${followerCount}">0</strong></div>
                    <div class="stat-btn">ÌåîÎ°úÏûâ <strong th:text="${followingCount}">0</strong></div>
                    <div class="stat-btn" th:if="${isOwner}">Íµ¨ÎèÖ <strong th:text="${subscriberCount}">0</strong></div>
                </div>
                <div class="action-row">
                    <th:block th:unless="${isOwner}">
                        <button class="btn-purple">ÌåîÎ°úÏö∞</button>
                        <button class="btn-white">Î©îÏãúÏßÄ</button>
                        <button class="btn-purple">Íµ¨ÎèÖ</button>
                    </th:block>

                    <button class="btn-white" th:if="${isOwner}" onclick="location.href='/blog/write'">
                        <i class="fa-solid fa-plus"></i> ÏÉà Í∏Ä ÏûëÏÑ±
                    </button>
                </div>
                <div class="visit-summary">
                    <p>Ï†ÑÏ≤¥ Î∞©Î¨∏Ïûê <strong th:text="${totalVisit}">0</strong></p>
                    <p>Ï†ÑÏ≤¥ Í∏Ä <strong class="purple-txt" th:text="${postCount}">0</strong></p>
                    <p class="visit-today">Ïò§Îäò <span th:text="${todayVisit}">0</span></p>
                </div>
            </div>

            <div class="header-right">
                <p class="pick-title">Ïú†Ï†Ä PICK Ïù∏Í∏∞ Í∏Äüî•</p>
                <div class="pick-card-item" th:if="${pickPost != null}"
                    th:onclick="|location.href='@{/blog/detail/{id}(id=${pickPost.id})}'|" style="cursor:pointer;">
                    <img th:src="${pickPost.thumbnailUrl}" alt="Pick Thumb">
                    <div class="pick-info">
                        <h4 class="pick-card-title" th:text="${pickPost.title}">Ï†úÎ™©</h4>
                        <span class="tag-pill" th:text="${pickPost.category}">Category</span>
                        <div class="pick-meta-row">
                            <div class="p-meta">
                                <i class="fa-solid fa-heart"></i> <span th:text="${pickPost.likeCount}">0</span>
                            </div>
                            <span class="p-date"
                                th:text="${#temporals.format(pickPost.createdAt, 'yyyy.MM.dd')}">ÎÇ†Ïßú</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <hr class="header-line">

        <nav class="main-tabs">
            <div class="tab-btn active" data-type="all" title="ÏùºÎ∞ò Í∏Ä"><i class="fa-solid fa-book"></i></div>
            <div class="tab-btn" data-type="scrap" title="Ïä§ÌÅ¨Îû©Ìïú Í∏Ä" th:if="${isOwner}"><i
                    class="fa-solid fa-bookmark"></i></div>
            <div class="tab-btn" data-type="paid" title="Ïú†Î£å ÏΩòÌÖêÏ∏†"><i class="fa-solid fa-crown"></i></div>
        </nav>

        <div class="content-body">
            <main class="post-area">
                <div class="list-controls">
                    <div class="search-bar">
                        <input type="text" id="searchInput" placeholder="Í≤ÄÏÉâÏñ¥Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî">
                        <i class="fa-solid fa-magnifying-glass" id="searchBtn"></i>
                    </div>
                    <div class="filter-options">
                        <span class="filter-item active" data-sort="latest">ÏµúÏã†Ïàú</span>
                        <span class="filter-item" data-sort="view">Ï°∞ÌöåÏàú</span>
                        <span class="filter-item" data-sort="like">Ïù∏Í∏∞Ïàú</span>
                        <span class="filter-item" data-sort="comment">ÎåìÍ∏ÄÏàú</span>
                    </div>
                </div>

                <div id="post-list-wrap"></div>

                <div id="infinite-sentinel" class="scroll-loader">
                    <div class="dot-loader"></div>
                </div>
            </main>

            <aside class="side-area">
                <h3>ÌÉúÍ∑∏ <span th:text="'(' + ${#lists.size(tags)} + ')'">(0)</span></h3>
                <ul class="tag-cat-list" id="tag-list">
                    <li class="tag-item" th:each="tag : ${tags}" th:data-tag="${tag.name}">
                        <span th:text="${tag.name}">TagName</span>
                        <small th:text="${tag.count}">0</small>
                    </li>
                </ul>
            </aside>
        </div>
    </div>

    <button id="goTopBtn" title="Go to top"><i class="fa-solid fa-arrow-up"></i></button>

    <div th:replace="~{common/footer :: footer}"></div>
    <script th:src="@{/js/notification/noti.js}"></script>
    <script th:src="@{/js/common/header.js}"></script>

    <script th:src="@{/js/board/blog/myDev.js}"></script>

    <script th:inline="javascript">
        /*<![CDATA[*/
        // IDE ÏóêÎü¨ Î∞©ÏßÄÎ•º ÏúÑÌï¥ Ï£ºÏÑù Î¨∏Î≤ï ÏÇ¨Ïö©
        // userProfile.idÍ∞Ä Îì§Ïñ¥Ïò§Î©¥ Í∑∏ Í∞íÏúºÎ°ú ÎåÄÏ≤¥ÎêòÍ≥†, ÏóÜÏúºÎ©¥ ""(ÎπàÍ∞í)Ïù¥ Îì§Ïñ¥Í∞ê
        const blogOwnerId = /*[[${userProfile.id}]]*/ ""; 
        /*]]>*/
    </script>
</body>

</html>